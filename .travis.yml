dist: bionic

language: c

services: docker

before_install:
  - docker pull mirisbowring/texlive_ctan_basic:2019
  - chmod +x ./script/texbuild.sh

script:
  - mkdir tempfiles
  - find . -maxdepth 1 -name "*.html" -type f -exec mv {} tempfiles \;
  - find . -maxdepth 1 -name "*.css" -type f -exec mv {} tempfiles \;
  - docker run --rm -it --volume="$PWD:/data" mirisbowring/texlive_ctan_basic:2019 ./script/texbuild.sh
  - rm -f *.aux *.xref *.tmp *.4tc *.4ct *.idv *.lg *.dvi *.logs *.html *.css
  - rm -v .make4ht
  - rm -rf script _posts-tex script
  - find tempfiles -maxdepth 1 -type f -exec mv {} . \;
  - rm -rf tempfiles
  - rm -v .travis.yml

deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  repo: brandonhewer/brandonhewer.github.io
  target_branch: master
  keep_history: true
  on:
    branch: master

env:
  global:
    secure: evHI1v1hkTiSWVuWTGkmctmoDge/UX4xELaZWYNFsNmutvlKq25hatkQftaS9+Tl4P99foL4VI33Z1eGi69Y1DBM7r6BbFZxYS6SpM0bVnwfXL1CeBdDR+3fh4BRlsvnIyGfiKdzeIPmNFr824Xry1DUnEVYxLIPOCoC+dRfJH86oaFZOl5IvHqoPf74POLMwSDFWENhVCyCYtWum1G4rgWghi1O/rdCW8hUPuAP27IRcqqTRrtPcglNpOP9zUR9jigmqbnuqOW/3AfzayeBGpXshEHPIwdP6ZLFdXl3zFxfanD/RUTtY0zVq3mFTGNb13wUFw3L3Y2iak6bAzfu2WEXE4w2IpEVsmrqa9tofU1ipkYgnARcQRPCaIYYscT6FezaZeqCAsOgaN66J5KFZKh77YblcJHrY6vUBffshyjGacWmCU2LH9r/xl5hb7rsDPFmGLa3Ac8V0D29quldqShnVnNphDKZCkhNs2mVKT4eyBp+3xhmgXN1cHlbuVrR8HVYU1zbTpQiybZxIxYkR4EoSu0bAYb6fmuwWNY9Qfd9zFvklvKBYC/hK7rItAw12047R+Ur3XTH97glD5VcEAGFFdOHzH8Yqht6TDDfJfLIQA4HLRnx5XHGvbajJXw9h0MACXEaKMyJ+EAtX/7huM/3QMA4B2tU2LK7rZdnKQ4=
