dist: bionic

language: c

services: docker

before_install:
  - docker pull mirisbowring/texlive_ctan_basic:2019
  - chmod +x ./script/texbuild.sh

script:
  - mkdir tempfiles
  - find . -maxdepth 1 -name "*.html" -type f -exec mv {} tempfiles \;
  - find . -maxdepth 1 -name "*.css" -type f -exec mv {} tempfiles \;
  - docker run --rm -it --volume="$PWD:/data" mirisbowring/texlive_ctan_basic:2019 ./script/texbuild.sh
  - rm -f *.aux *.xref *.tmp *.4tc *.4ct *.idv *.lg *.dvi *.logs *.html *.css
  - rm -v .make4ht
  - rm -rf script _posts-tex script
  - find tempfiles -maxdepth 1 -type f -exec mv {} . \;
  - rm -rf tempfiles
  - rm -v .travis.yml

deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  repo: brandonhewer/brandonhewer.github.io
  target_branch: master
  keep_history: true
  on:
    branch: master

env:
  secure: fwVairRf7kvMl2DA+VpNo5UCs81cEMEqmWngikLihL8dVGY4ovZ8gsjIR+jMG0Z1/S1qod2qlDJsH4fM2NTDSPTuB+jxgDtaa9ErCBgNOEWOAgOGSk/oYJ3vNE/j6tZKVzVor6+jOyHoxPSz7ZdrauG+90HfBQ3/0yTAZBRIPvewYL4k8ETlbcJHowvYtTuRzq3AHDzv3WGilzfJarPntxcpjEPan4eecZAO0/Vv8d5ZZEWaJmXs8wUCk6NkVJqYihki92epXsDAGu//S4X2j3B6w8L5/33MCdmmMIE8Aij52X1Rim7tEAnQgVtKOiTzlsEgV7TuV1+pwqUXT0BB6h+OSCtQQL15e8C8e1Jw6iumZdW/IuUAnKXXNXTVd4gCCV5lW6lC+y+h6XGzcsO6tcWyird8LY94/alVeYl22GQ+/cAMiQ9f1zOOj+v1wYxCtt7bA41HNPLuvrLvmaQHp3UdFTHRpRG9vm17W+bOr+u+IgBQ6GPHBbWAO0fv2vdg/dnmjg3B6fpfco1V/B+adhtF82QAZrt1Dm8FAYwvAIrfhVrsfHbSILkRituLB+nGwPiXwznujPjky+wz1iDcJ9pcFJ6yrNfRyLBWD0TKCO2JTUftacNBkdGiWsUJAMUCkrJNLHFxPSP4rozx7r69dpzZ3Wf2z+KyJzVahW2vXrQ=
